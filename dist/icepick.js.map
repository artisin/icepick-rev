{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5d6cb49fa6330848ef87","webpack:///./lib/index.js"],"names":["i","exports","identity","coll","weCareAbout","val","Array","isArray","isObjectLike","constructor","Object","getPrototypeOf","prototype","forKeys","obj","iter","idx","keys","length","cloneObj","newObj","key","clone","slice","freezeIfNeeded","process","env","NODE_ENV","isFrozen","baseFreeze","_freeze","freeze","prevNodes","some","Error","push","prop","pop","thaw","newColl","assoc","value","set","dissoc","unset","assocIn","path","key0","setIn","dissocIn","hasOwnProperty","unsetIn","baseGet","reduce","curr","getIn","updateIn","callback","existingVal","forEach","methodName","arr","newArr","displayName","splice","_args","args","map","apply","arg1","arg2","fn","extend","assign","objs","singleAssign","obj1","obj2","merge","target","source","resolver","sourceVal","targetVal","resolvedSourceVal","assocIfDifferent","chainProto","thru","match","chain","wrapped","create","_weCareAbout"],"mappings":"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","file":"icepick.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"icepick\"] = factory();\n\telse\n\t\troot[\"icepick\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5d6cb49fa6330848ef87","/**\n * This allows you to work with object hierarchies that have been frozen\n * with Object.freeze().  \"get\" operations can use the normal JS syntax,\n * but operations that modify the data will have to return partial copies of\n * the structure. The portions of the structure that did not change will\n * === their previous values.\n *\n * Inspired by clojure/mori and Immutable.js\n */\n\n'use strict'\n\nconst i = exports\n\nconst identity = coll => coll\n\n// we only care about objects or arrays for now\nconst weCareAbout = val => val !== null &&\n    (Array.isArray(val) ||\n      // This will skip objects created with `new Foo()`\n      // and objects created with `Object.create(proto)`\n      // The benefit is ignoring DOM elements and event emitters,\n      // which are often circular.\n      isObjectLike(val))\n\nconst isObjectLike = val => typeof val === 'object' &&\n    val.constructor === Object &&\n    Object.getPrototypeOf(val) === Object.prototype\n\nconst forKeys = (obj, iter) => {\n  let idx, keys\n  if (Array.isArray(obj)) {\n    idx = obj.length\n    while (idx--) {\n      iter(idx)\n    }\n    return\n  }\n  keys = Object.keys(obj)\n  idx = keys.length\n  while (idx--) {\n    iter(keys[idx])\n  }\n}\n\nconst cloneObj = obj => {\n  const newObj = {}\n  const keys = Object.keys(obj)\n  let idx = keys.length\n  let key\n  while (idx--) {\n    key = keys[idx]\n    newObj[key] = obj[key]\n  }\n  return newObj\n}\n\nconst clone = (coll) => {\n  if (Array.isArray(coll)) {\n    return coll.slice()\n  } else {\n    return cloneObj(coll)\n  }\n}\n\nconst freezeIfNeeded = process.env.NODE_ENV === 'production'\n? identity\n: coll => {\n  if (weCareAbout(coll) && !Object.isFrozen(coll)) {\n    return baseFreeze(coll)\n  }\n  return coll\n}\n\nconst _freeze = process.env.NODE_ENV === 'production'\n? identity\n: coll => {\n  if (typeof coll === 'object') {\n    return Object.freeze(coll)\n  } else {\n    return coll\n  }\n}\n\nconst prevNodes = []\n\nconst baseFreeze = (coll) => {\n  if (prevNodes.some(val => val === coll)) {\n    throw new Error('object has a reference cycle')\n  }\n  prevNodes.push(coll)\n  forKeys(coll, key => {\n    const prop = coll[key]\n    if (weCareAbout(prop)) {\n      baseFreeze(prop)\n    }\n  })\n  prevNodes.pop()\n\n  Object.freeze(coll)\n  return coll\n}\n\n/**\n * recrursively freeze an object and all its child objects\n * @param  {Object|Array} coll\n * @return {Object|Array}\n */\nexports.freeze = process.env.NODE_ENV === 'production'\n? identity\n: baseFreeze\n\n/**\n * recursively un-freeze an object, by cloning frozen collections\n * @param  {[type]} coll [description]\n * @return {[type]}      [description]\n */\nexports.thaw = function thaw (coll) {\n  if (!weCareAbout(coll) || !Object.isFrozen(coll)) return coll\n\n  const newColl = Array.isArray(coll)\n    ? new Array(coll.length)\n    : {}\n\n  forKeys(coll, key => {\n    newColl[key] = thaw(coll[key])\n  })\n  return newColl\n}\n\n/**\n * set a value on an object or array\n * @param  {Object|Array}  coll\n * @param  {String|Number} key   Key or index\n * @param  {Object}        value\n * @return {Object|Array}        new object hierarchy with modifications\n */\nexports.assoc = function assoc (coll, key, value) {\n  if (coll[key] === value) {\n    return _freeze(coll)\n  }\n\n  const newObj = clone(coll)\n\n  newObj[key] = freezeIfNeeded(value)\n\n  return _freeze(newObj)\n}\nexports.set = exports.assoc\n\n/**\n * un-set a value on an object or array\n * @param  {Object|Array}  coll\n * @param  {String|Number} key  Key or Index\n * @return {Object|Array}       New object or array\n */\nexports.dissoc = function dissoc (coll, key) {\n  const newObj = clone(coll)\n\n  delete newObj[key]\n\n  return _freeze(newObj)\n}\nexports.unset = exports.dissoc\n\n/**\n * set a value deep in a hierarchical structure\n * @param  {Object|Array} coll\n * @param  {Array}        path    A list of keys to traverse\n * @param  {Object}       value\n * @return {Object|Array}       new object hierarchy with modifications\n */\nexports.assocIn = function assocIn (coll, path, value) {\n  const key0 = path[0]\n  if (path.length === 1) {\n    // simplest case is a 1-element array.  Just a simple assoc.\n    return i.assoc(coll, key0, value)\n  } else {\n    // break the problem down.  Assoc this object with the first key\n    // and the result of assocIn with the rest of the keys\n    return i.assoc(coll, key0, assocIn(coll[key0] || {}, path.slice(1), value))\n  }\n}\nexports.setIn = exports.assocIn\n\n/**\n * un-set a value on an object or array\n * @param  {Object|Array}  coll\n * @param  {Array} path  A list of keys to traverse\n * @return {Object|Array}       New object or array\n */\nexports.dissocIn = function dissocIn (coll, path) {\n  const key0 = path[0]\n  if (!coll.hasOwnProperty(key0)) {\n    return coll\n  }\n  if (path.length === 1) {\n    // simplest case is a 1-element array.  Just a simple dissoc.\n    return i.dissoc(coll, key0)\n  } else {\n    // break the problem down.  Assoc this object with the first key\n    // and the result of dissocIn with the rest of the keys\n    return i.assoc(coll, key0, dissocIn(coll[key0], path.slice(1)))\n  }\n}\nexports.unsetIn = exports.dissocIn\n\n/**\n * get an object from a hierachy based on an array of keys\n * @param  {Object|Array} coll\n * @param  {Array}        path    list of keys\n * @return {Object}       value, or undefined\n */\nfunction baseGet (coll, path) {\n  return (path || []).reduce((curr, key) => {\n    if (!curr) { return }\n    return curr[key]\n  }, coll)\n}\n\nexports.getIn = baseGet\n\n/**\n * Update a value in a hierarchy\n * @param  {Object|Array}   coll\n * @param  {Array}          path     list of keys\n * @param  {Function} callback The existing value with be passed to this.\n *                             Return the new value to set\n * @return {Object|Array}      new object hierarchy with modifications\n */\nexports.updateIn = function updateIn (coll, path, callback) {\n  const existingVal = baseGet(coll, path)\n  return i.assocIn(coll, path, callback(existingVal))\n};\n\n// generate wrappers for the mutative array methods\n['push', 'unshift', 'pop', 'shift', 'reverse', 'sort']\n.forEach((methodName) => {\n  exports[methodName] = function (arr, val) {\n    const newArr = [...arr]\n\n    newArr[methodName](freezeIfNeeded(val))\n\n    return _freeze(newArr)\n  }\n\n  exports[methodName].displayName = 'icepick.' + methodName\n})\n\n// splice is special because it is variadic\nexports.splice = function splice (arr, ..._args) {\n  const newArr = [...arr]\n  const args = _args.map(freezeIfNeeded)\n\n  newArr.splice.apply(newArr, args)\n\n  return _freeze(newArr)\n}\n\n// slice is non-mutative\nexports.slice = function slice (arr, arg1, arg2) {\n  const newArr = arr.slice(arg1, arg2)\n\n  return _freeze(newArr)\n};\n\n['map', 'filter'].forEach((methodName) => {\n  exports[methodName] = function (fn, arr) {\n    const newArr = arr[methodName](fn)\n\n    return _freeze(newArr)\n  }\n\n  exports[methodName].displayName = 'icepick.' + methodName\n})\n\nexports.extend =\nexports.assign = function assign (obj, ...objs) {\n  const newObj = objs.reduce(singleAssign, obj)\n\n  return _freeze(newObj)\n}\n\nfunction singleAssign (obj1, obj2) {\n  return Object.keys(obj2).reduce((obj, key) => {\n    return i.assoc(obj, key, obj2[key])\n  }, obj1)\n}\n\nexports.merge = merge\nfunction merge (target, source, resolver) {\n  if (target == null || source == null) {\n    return target\n  }\n  return Object.keys(source).reduce((obj, key) => {\n    const sourceVal = source[key]\n    const targetVal = obj[key]\n\n    const resolvedSourceVal =\n      resolver ? resolver(targetVal, sourceVal, key) : sourceVal\n\n    if (weCareAbout(sourceVal) && weCareAbout(targetVal)) {\n      // if they are both frozen and reference equal, assume they are deep equal\n      if (\n        resolvedSourceVal === targetVal &&\n        (\n          process.env.NODE_ENV === 'production' ||\n          (\n            Object.isFrozen(resolvedSourceVal) &&\n            Object.isFrozen(targetVal)\n          )\n        )\n      ) {\n        return obj\n      }\n      if (Array.isArray(sourceVal)) {\n        return i.assoc(obj, key, resolvedSourceVal)\n      }\n      // recursively merge pairs of objects\n      return assocIfDifferent(obj, key,\n        merge(targetVal, resolvedSourceVal, resolver))\n    }\n\n    // primitive values, stuff with prototypes\n    return assocIfDifferent(obj, key, resolvedSourceVal)\n  }, target)\n}\n\nfunction assocIfDifferent (target, key, value) {\n  if (target[key] === value) {\n    return target\n  }\n  return i.assoc(target, key, value)\n}\n\nconst chainProto = {\n  value: function value () {\n    return this.val\n  },\n  thru: function thru (fn) {\n    this.val = freezeIfNeeded(fn(this.val))\n    return this\n  }\n}\n\nObject.keys(exports).forEach((methodName) => {\n  if (methodName.match(/^(map|filter)$/)) {\n    chainProto[methodName] = function (fn) {\n      this.val = exports[methodName](fn, this.val)\n      return this\n    }\n    return\n  }\n  chainProto[methodName] = function (...args) {\n    this.val = exports[methodName](this.val, ...args)\n    return this\n  }\n})\n\nexports.chain = function chain (val) {\n  const wrapped = Object.create(chainProto)\n  wrapped.val = val\n  return wrapped\n}\n\n// for testing\nif (process.env.NODE_ENV !== 'development' &&\n  process.env.NODE_ENV !== 'production') {\n  exports._weCareAbout = weCareAbout\n}\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js"],"sourceRoot":""}